package prototipus;

import java.io.IOException;
import java.util.Random;

import javax.imageio.ImageIO;

//
//
//  Generated by StarUML(tm) Java Add-In
//
//  @ Project : Untitled
//  @ File Name : Pump.java
//  @ Date : 4/22/2023
//  @ Author : 
//
//




/**A játékbeli pumpa fő funkcióinak megvalósítására, mely a következőket jelenti:
 *pumpa működőképességének feljegyzése, a pumpa beállítása (ki- és bemenet
 *egyaránt).*/
public class Pump extends Component {
	private Random random = new Random();
	
	public Pump(int capacity) {
		pumpPlaceable = false;
		node = true;
		itemSource = false;
		broken = false;
		leaks = false;
		this.capacity = capacity;
		try {
			sprite = ImageIO.read(getClass().getResource("pump.png"));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	/**Az osztály konstukrtora.*/
	public Pump() {
		pumpPlaceable = false;
		node = true;
		itemSource = false;
		broken = false;
		leaks = false;
		this.capacity = 10;
		try {
			sprite = ImageIO.read(getClass().getResource("pump.png"));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	/**A pumpa megjavítása.*/
	public void repaired() {
		broken = false;
	}

	/**A pumpa elromlása.*/
	public void malfunction() {
		broken = true;
	}

	/**Üres függvény, nincs implementációja.*/
	public void punctured() {
	}

	/**Az outputon a víz folyatásáért, illetve a pumpa elromlásáért felelős.*/
	public void updateStatus() {
		if (output != null && waterLevel > 0 && !broken) {
			boolean isOutputFull = output.isFull();
			if (!isOutputFull) {
				output.waterFlows();
				this.takeWater();
			}
		}
		if(random.nextInt(100) < 5) // 5% esely
			malfunction();
	}

	/**A víz folyásáért felelős.*/
	public void waterFlows() {
		addWater();
	}

	/**Az osztály szövegesítésére.
	 * @return String*/
	public String toString() {
		return "Pump";
	}
}
